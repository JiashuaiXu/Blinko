# 非功能需求文档

本文档描述 Blinko / 明眸 的非功能性需求，包括性能、安全、可维护性等。

---

## 1. 性能需求

### 1.1 应用性能
- **启动时间**：
  - 冷启动：< 3 秒
  - 热启动：< 1 秒
  - 首次初始化（含模型加载）：< 10 秒
- **内存占用**：
  - 空闲时：< 100MB
  - 检测运行时：< 200MB
  - 峰值：< 300MB
- **CPU 占用**：
  - 空闲时：< 1%
  - 定时提醒时：< 2%
  - 检测运行时：< 15%

### 1.2 响应性能
- **UI 响应**：< 100ms
- **设置保存**：< 50ms
- **数据查询**：< 200ms（单次查询）
- **提醒触发延迟**：< 500ms

### 1.3 检测性能
- **眨眼检测延迟**：< 500ms
- **坐姿检测延迟**：< 2 秒
- **检测准确率**：
  - 眨眼检测：> 80%（可接受误报）
  - 坐姿检测：> 75%

---

## 2. 安全需求

### 2.1 数据安全
- **本地存储**：所有数据存储在本地，不上传到服务器
- **数据加密**：敏感配置信息可加密存储（可选）
- **数据备份**：用户可手动导出数据备份

### 2.2 隐私保护
- **图像处理**：所有图像处理在本地完成
- **不存储图像**：摄像头数据仅用于实时检测，不保存
- **数据匿名化**：统计数据不包含个人身份信息
- **透明告知**：首次使用摄像头时明确告知用途和隐私政策

### 2.3 权限管理
- **最小权限原则**：仅请求必要的系统权限
- **用户控制**：用户可随时在设置中禁用权限
- **权限说明**：清晰说明每个权限的用途

---

## 3. 可靠性需求

### 3.1 稳定性
- **崩溃率**：< 0.1%
- **无响应率**：< 0.05%
- **数据丢失率**：0%（数据实时保存）

### 3.2 容错性
- **摄像头故障**：优雅降级，仅使用定时提醒
- **检测失败**：不中断应用，记录错误日志
- **配置损坏**：自动恢复默认配置

### 3.3 恢复能力
- **异常退出恢复**：自动保存状态，下次启动恢复
- **数据恢复**：支持从备份恢复数据

---

## 4. 可维护性需求

### 4.1 代码质量
- **代码规范**：
  - Rust：遵循 `rustfmt` 和 `clippy` 规范
  - TypeScript：使用 ESLint + Prettier
  - Python：遵循 PEP 8
- **代码注释**：注释覆盖率 > 30%
- **文档注释**：公共 API 必须有文档注释

### 4.2 测试覆盖
- **单元测试**：覆盖率 > 60%
- **集成测试**：覆盖核心功能流程
- **关键路径**：必须有测试覆盖

### 4.3 日志系统
- **日志级别**：DEBUG / INFO / WARN / ERROR
- **日志文件**：存储在应用数据目录
- **日志轮转**：自动清理旧日志（保留 7 天）

---

## 5. 可扩展性需求

### 5.1 功能扩展
- **插件系统**：预留插件接口（可选）
- **检测算法**：支持更换检测算法
- **提醒方式**：支持添加新的提醒方式

### 5.2 平台扩展
- **多平台支持**：架构设计支持 macOS / Linux（未来）
- **跨平台兼容**：配置和数据格式跨平台兼容

---

## 6. 可用性需求

### 6.1 易用性
- **首次使用**：提供引导流程，< 2 分钟完成设置
- **学习曲线**：无需阅读文档即可使用基本功能
- **错误提示**：友好、清晰的错误提示

### 6.2 可访问性
- **键盘导航**：支持 Tab 键导航
- **屏幕阅读器**：关键元素添加 aria 标签
- **颜色对比度**：符合 WCAG AA 标准

---

## 7. 兼容性需求

### 7.1 操作系统
- **Windows 10**：版本 1903 及以上
- **Windows 11**：所有版本
- **未来支持**：macOS 12+、Linux（Ubuntu 20.04+）

### 7.2 硬件要求
- **CPU**：x64 架构，2 核心以上
- **内存**：4GB 以上
- **摄像头**：720p 以上（可选，用于检测功能）
- **存储**：100MB 可用空间

### 7.3 软件依赖
- **运行时**：无需额外运行时（Tauri 打包）
- **Python**：可选（仅在使用 Python 检测脚本时需要）

---

## 8. 部署需求

### 8.1 安装包
- **安装包大小**：< 50MB（不含 Python 运行时）
- **安装流程**：一键安装，< 30 秒
- **卸载流程**：完全卸载，不留残留文件

### 8.2 更新机制
- **更新检查**：可选，用户可启用自动检查更新
- **更新方式**：增量更新或完整安装包
- **更新提示**：非强制，用户可选择是否更新

---

## 9. 可观测性需求

### 9.1 监控指标
- **应用运行时间**：记录应用启动和运行时长
- **功能使用统计**：记录各功能使用频率
- **错误统计**：记录错误类型和频率

### 9.2 诊断信息
- **系统信息**：操作系统版本、硬件信息
- **配置信息**：当前配置参数（脱敏）
- **日志导出**：用户可导出日志用于问题诊断

---

## 10. 合规性需求

### 10.1 隐私合规
- **GDPR**：符合 GDPR 要求（本地处理，不上传数据）
- **数据最小化**：仅收集必要的数据
- **用户权利**：用户可随时查看、删除数据

### 10.2 开源合规
- **许可证**：选择合适的开源许可证（待定）
- **依赖声明**：完整声明所有依赖及其许可证

---

## 11. 文档需求

### 11.1 用户文档
- **用户手册**：功能说明和使用指南
- **FAQ**：常见问题解答
- **更新日志**：版本更新说明

### 11.2 开发文档
- **架构文档**：系统架构和模块说明
- **API 文档**：Tauri 命令和前端 API 说明
- **贡献指南**：代码规范和贡献流程

---

## 12. 支持需求

### 12.1 用户支持
- **问题反馈**：GitHub Issues
- **功能建议**：GitHub Discussions
- **社区支持**：社区论坛或 Discord（可选）

### 12.2 维护支持
- **Bug 修复**：关键 Bug 7 天内修复
- **功能更新**：每月至少一次更新（MVP 阶段后）
- **安全更新**：及时响应安全漏洞

